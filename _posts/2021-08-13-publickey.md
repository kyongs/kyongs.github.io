---
layout: post
title: 공개키 암호화 방식/ 권한 설정 방식
subheading: 
author: kyong
categories: 
tags: UI, 회사
sidebar: []
---

### 비밀번호 저장 방식

회사 프로젝트에 공개키 암호화 방식을 사용한다 해서 동작과정을 익히기 위해 여쭤봄<br/>
사용자 비밀번호와 관련된 auth라는 테이블이 존재하는데, 정확히 어떤 정보가 저장되고 있는지 모르는 상태였다.<br/>
UI에서는 로그인 시 공개키를 서버에서 받아와 이를 base 64로 암호화, 이 암호화한 키를 다시 AUTH api 서비스로 날림<br/>
서버에서는 이 공개키를 받아 private key로 변환, 이때는 HMAC 방식을 사용한다.<br/>
HMAC 방식 사용하면 원래 key가 어떤 값이였는지 모른다고 함(즉, 서버에서는 이걸 저장하고 있기 때문에 사용자가 비밀번호 분실 시 찾을 수 있는 방법이 없음)<br/>
그럼 사용자가 입력한 비밀번호가 실제 비밀번호가 맞는지는 어떻게 인식하냐<br/>
사용자가 입력한 값을 위 방식을 통해 서버에 전달하면 똑같이 평문을 HMAC 방식으로 변환한다.<Br/>
이 변환된 값이 서버에 저장되어 있는 값과 동일하다면 비밀번호가 맞다고 보고 넘어간다.

<br/>

### 권한 설정 방식

권한별 설정을 위해 비트마스크 사용중<br/>
비크마스크는 한 비트마다 의미를 부여해서 권한을 세세하게 조정할 수 있다는 장점이 있지만, 권한이 바뀔때마다 UI에서는 비트값을 바꿔 사용해야 하기 때문에 번거로움<br/>
그래서 최근 다른 회사들에서는 그냥 ROOT = 권한 이거이거를 쓴다! 하고 고정시키는 방식을 많이 쓴다 한다.<br/>
회사 서버에서는 비트마스크의 장점을 살리고, 단점은 보완한 rbac 방법 사용하지만 이를 UI에 녹여내기 힘들기 때문에 UI에서는 비트마스크를 사용한다.
